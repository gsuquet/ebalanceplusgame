<script setup lang="ts">
    import { Scenario } from '../types/Scenario';
    import { Icon } from '@iconify/vue';
    import { convertI18nObjectToLocale } from '../helpers/translation';
    import { I18nObject } from '../types/I18nObject';
</script>

<template>
    <section class="list-container">
        <div class="boucle" v-for="scenario in scenarioList" @click="isClicked(scenario)">
            <div class="box-container">
                <div class="day-container">
                    <h1>
                        {{ convertI18nObject(scenario.day.names) }}
                    </h1>                
                    <div class="icon-season">
                        <Icon :icon="scenario.season.icon"/>
                    </div>
                </div>
                <h1 class="title">
                    {{ convertI18nObject(scenario.names) }}
                </h1>
                <div class="icon-container" >
                    <div class="icon-type-prod" >
                        <!-- TODO add the icon  -->
                    </div>
                </div>
            </div>
        </div>
    </section>
</template>

<style scoped lang="scss">
    @import "../styles/components/setupProductionAndScenarioList.scss";
</style>

<script lang="ts">
    export default {
        name: 'SetupScenarioList',
        components: {
            Icon,
        },
        data(){
            return {
                scenarioStore: useScenarioStore(),
                gameParametersStore: useGameParametersStore(),
            }
        },
        computed: {
            scenarioList() {
                return this.scenarioStore.scenarios;
            },
        },
        methods: {
            isClicked(scenario: Scenario) {
                this.scenarioStore.setClickedScenario(scenario);
            },
            convertI18nObject(objList: I18nObject[]) {
                return convertI18nObjectToLocale(objList, this.gameParametersStore.language);
            },
        }
    }
</script>
